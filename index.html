<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Levantador de Preços para Construção</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial, sans-serif; max-width: 900px; margin: 20px auto; }
        label { display: block; margin-top: 10px; }
        input, select { width: 100%; padding: 8px; margin-top: 5px; }
        button { margin-top: 20px; width: 100%; padding: 10px; background-color: #007bff; color: white; cursor: pointer; }
        .resultado, #detalhesCategorias, #tabelaDetalhes { margin-top: 20px; }
        table { width: 100%; margin-top: 20px; border-collapse: collapse; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        canvas { margin-top: 30px; }
    </style>
</head>
<body>

<h2>Levantador de Preços para Construção</h2>

<!-- ETAPA 1: Inserir Dados para Cálculos -->
<form id="formulario">
    <label>Custo por Metro Quadrado (R$):</label>
    <input type="number" id="custoPorMetroQuadrado" required>

    <label>Metros Quadrados:</label>
    <input type="number" id="metrosQuadrados" required>

    <label>Custo do Terreno (R$):</label>
    <input type="number" id="custoTerreno" required>

    <label>Custo com Mobiliário (R$):</label>
    <input type="number" id="custoMobilario" required>

    <label>Custo com Paisagismo (R$):</label>
    <input type="number" id="custoPaisagismo" required>

    <label>Custo com Desenho (R$):</label>
    <input type="number" id="custoDesenho" required>

    <label>Cercado (R$):</label>
    <input type="number" id="cercado" required>

    <label>Câmeras (R$):</label>
    <input type="number" id="cameras" required>

    <label>Placa Solar (R$):</label>
    <input type="number" id="placaSolar" required>

    <label>Portão Eletrônico (R$):</label>
    <input type="number" id="portaoEletronico" required>

    <label>Divulgação (R$):</label>
    <input type="number" id="divulgacao" required>

    <label>Impostos de Construção (%):</label>
    <input type="number" id="impostosConstrucao" value="5" required>

    <label>Impostos sobre Venda (%):</label>
    <input type="number" id="impostosVenda" value="10" required>

    <button type="button" onclick="calcular()">Calcular Total</button>
</form>

<!-- ETAPA 2: Exibir Resultados -->
<div class="resultado" id="resultado"></div>

<!-- ETAPA 3: Adicionar Detalhes para Categoria -->
<div id="detalhesCategorias" style="display: none;">
    <h3>Adicionar Detalhes por Categoria</h3>
    <label>Categoria:</label>
    <select id="categoriaDetalhe">
        <option value="Mobiliário">Mobiliário</option>
        <option value="Paisagismo">Paisagismo</option>
        <option value="Cercado">Cercado</option>
        <option value="Câmeras">Câmeras</option>
        <option value="Placa Solar">Placa Solar</option>
        <option value="Portão Eletrônico">Portão Eletrônico</option>
    </select>

    <label>Item:</label>
    <input type="text" id="itemDetalhe">
    
    <label>Valor (R$):</label>
    <input type="number" id="valorDetalhe">

    <button type="button" onclick="adicionarDetalhe()">Adicionar Item</button>
</div>

<!-- Tabela para exibir itens detalhados -->
<table id="tabelaDetalhes">
    <tr><th>Categoria</th><th>Item</th><th>Valor (R$)</th></tr>
</table>

<!-- ETAPA 4: Gráfico de Gastos por Categoria -->
<canvas id="graficoCategorias" width="400" height="200"></canvas>

<script>
let detalhes = {};
let totalCusto = 0;

// Função para calcular os custos iniciais
function calcular() {
    const custoPorMetroQuadrado = parseFloat(document.getElementById("custoPorMetroQuadrado").value);
    const metrosQuadrados = parseFloat(document.getElementById("metrosQuadrados").value);
    const custoTerreno = parseFloat(document.getElementById("custoTerreno").value);
    const custoMobilario = parseFloat(document.getElementById("custoMobilario").value);
    const custoPaisagismo = parseFloat(document.getElementById("custoPaisagismo").value);
    const custoDesenho = parseFloat(document.getElementById("custoDesenho").value);
    const cercado = parseFloat(document.getElementById("cercado").value);
    const cameras = parseFloat(document.getElementById("cameras").value);
    const placaSolar = parseFloat(document.getElementById("placaSolar").value);
    const portaoEletronico = parseFloat(document.getElementById("portaoEletronico").value);
    const divulgacao = parseFloat(document.getElementById("divulgacao").value);

    const impostosConstrucao = parseFloat(document.getElementById("impostosConstrucao").value) / 100;
    const impostosVenda = parseFloat(document.getElementById("impostosVenda").value) / 100;

    const custoConstrucao = custoPorMetroQuadrado * metrosQuadrados;
    const custosExtras = custoMobilario + custoPaisagismo + custoDesenho + cercado + cameras + placaSolar + portaoEletronico + divulgacao;
    totalCusto = custoConstrucao + custoTerreno + custosExtras;
    const precoVenda = totalCusto * 2;
    const impostoVendaCalculado = precoVenda * impostosVenda;

    document.getElementById("resultado").innerHTML = `
        <b>Custo Total:</b> R$ ${totalCusto.toFixed(2)}<br>
        <b>Preço de Venda:</b> R$ ${precoVenda.toFixed(2)}<br>
        <b>Imposto sobre Venda:</b> R$ ${impostoVendaCalculado.toFixed(2)}
    `;
    document.getElementById("detalhesCategorias").style.display = "block";
}
</script>
</body>
</html>
